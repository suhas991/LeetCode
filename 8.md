# React Component Lifecycle Notes

## 1. **Component Lifecycle in React (Class Components)**

React class components have **three main phases** in their lifecycle:

1. **Mounting** → When component is created & inserted into the DOM.
2. **Updating** → When component is re-rendered due to state/props change.
3. **Unmounting** → When component is removed from the DOM.

---

### **1.1 Mounting Phase**

Methods called in order:

* `constructor()`
* `static getDerivedStateFromProps()`
* `render()`
* `componentDidMount()`

#### Example:

```jsx
class LifecycleDemo extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
    console.log("Constructor: State initialized");
  }

  static getDerivedStateFromProps(props, state) {
    console.log("getDerivedStateFromProps: Sync state with props if needed");
    return null; // no state change
  }

  componentDidMount() {
    console.log("componentDidMount: Component mounted");
    // Example: API calls
  }

  render() {
    console.log("Render: UI rendering");
    return <h1>Count: {this.state.count}</h1>;
  }
}
```

---

### **1.2 Updating Phase**

Methods called when **state or props change**:

* `static getDerivedStateFromProps()`
* `shouldComponentUpdate()`
* `render()`
* `getSnapshotBeforeUpdate()`
* `componentDidUpdate()`

#### Example:

```jsx
class UpdateDemo extends React.Component {
  constructor(props) {
    super(props);
    this.state = { count: 0 };
  }

  shouldComponentUpdate(nextProps, nextState) {
    console.log("shouldComponentUpdate: Decide re-render");
    return true; // default is true
  }

  getSnapshotBeforeUpdate(prevProps, prevState) {
    console.log("getSnapshotBeforeUpdate: Capture DOM info before update");
    return null;
  }

  componentDidUpdate(prevProps, prevState, snapshot) {
    console.log("componentDidUpdate: Component updated");
  }

  render() {
    return (
      <div>
        <h2>{this.state.count}</h2>
        <button onClick={() => this.setState({ count: this.state.count + 1 })}>
          Increment
        </button>
      </div>
    );
  }
}
```

---

### **1.3 Unmounting Phase**

* `componentWillUnmount()` → Called before component is destroyed.

#### Example:

```jsx
class UnmountDemo extends React.Component {
  componentWillUnmount() {
    console.log("componentWillUnmount: Cleanup tasks");
    // Example: clearInterval, remove event listeners
  }

  render() {
    return <h1>Unmount Example</h1>;
  }
}
```

---

## 2. **Functional Components Lifecycle (Hooks)**

Functional components use **Hooks** to replicate lifecycle behavior.

### **Mounting**

* `useEffect(() => { ... }, [])`

```jsx
import React, { useEffect } from "react";

function MountingHook() {
  useEffect(() => {
    console.log("Component Mounted");
    // Example: API call
  }, []); // Empty dependency → runs only once
  return <h1>Hello React Hooks</h1>;
}
```

---

### **Updating**

* `useEffect(() => { ... }, [dependency])`

```jsx
import React, { useState, useEffect } from "react";

function UpdatingHook() {
  const [count, setCount] = useState(0);

  useEffect(() => {
    console.log("Component Updated (count changed):", count);
  }, [count]);

  return (
    <div>
      <h2>{count}</h2>
      <button onClick={() => setCount(count + 1)}>Increment</button>
    </div>
  );
}
```

---

### **Unmounting**

* Cleanup function inside `useEffect`.

```jsx
import React, { useEffect } from "react";

function UnmountingHook() {
  useEffect(() => {
    console.log("Component Mounted");

    return () => {
      console.log("Component Unmounted");
      // Cleanup: clearInterval, remove listeners
    };
  }, []);

  return <h1>Unmount Example</h1>;
}
```

---

## 3. **Lifecycle Methods vs Hooks Mapping**

| **Class Component**     | **Functional Component (Hooks)**           |
| ----------------------- | ------------------------------------------ |
| `componentDidMount`     | `useEffect(() => {}, [])`                  |
| `componentDidUpdate`    | `useEffect(() => {}, [dependencies])`      |
| `componentWillUnmount`  | `useEffect(() => { return () => {} }, [])` |
| `shouldComponentUpdate` | `React.memo` or custom logic               |
